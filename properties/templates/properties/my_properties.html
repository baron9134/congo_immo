{% extends 'properties/base.html' %}

{% block content %}
<h1 class="text-2xl font-bold mb-6">Mes biens</h1>

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for prop in page_obj %}
        <div class="bg-white rounded shadow p-4 max-h-56 overflow-hidden">
            <img src="{{ prop.main_image.url }}" alt="{{ prop.title }}" class="w-full h-32 object-cover rounded mb-2">
            <h3 class="text-lg font-semibold">{{ prop.title }}</h3>
            <p class="text-sm text-gray-600">{{ prop.address }}</p>
            <p class="text-sm text-gray-800 mt-1 font-semibold">{{ prop.price }} $</p>
            <a href="{% url 'property_detail' prop.id %}" class="inline-block mt-2 text-blue-600 hover:underline text-sm">Voir plus</a>
            <!-- Lien pour modifier le bien -->
            <a href="{% url 'edit_property' prop.id %}" class="inline-block mt-1 text-green-600 hover:underline text-sm">Modifier</a>
        </div>
    {% empty %}
        <p>Vous n'avez pas encore ajouté de biens.</p>
    {% endfor %}
</div>

<!-- Pagination -->
<div class="mt-6 flex justify-center space-x-2">
    {% if page_obj.has_previous %}
        <a href="?page=1" class="px-3 py-1 bg-gray-200 rounded">« Première</a>
        <a href="?page={{ page_obj.previous_page_number }}" class="px-3 py-1 bg-gray-200 rounded">‹</a>
    {% endif %}

    <span class="px-3 py-1 bg-blue-500 text-white rounded">
        Page {{ page_obj.number }} sur {{ page_obj.paginator.num_pages }}
    </span>

    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}" class="px-3 py-1 bg-gray-200 rounded">›</a>
        <a href="?page={{ page_obj.paginator.num_pages }}" class="px-3 py-1 bg-gray-200 rounded">Dernière »</a>
    {% endif %}
</div>

{% endblock %}
